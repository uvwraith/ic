/*! For license information please see RiskEvaluation.2.10.0.min.js.LICENSE.txt */
/* Minified on 1/26/2022*/
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return r})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return u})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return m})),n.d(t,"__spread",(function(){return y})),n.d(t,"__spreadArrays",(function(){return _})),n.d(t,"__await",(function(){return v})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return g})),n.d(t,"__asyncValues",(function(){return S})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return w})),n.d(t,"__importDefault",(function(){return x})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return C}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,i){t(n,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function _(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function g(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:v(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCMICookie=t.showMessage=t.showErrorMessage=t.initMFAModal=t.showResponseError=t.requireStepUp=t.post=t.MFAService=t.MFAComponent=void 0;var i=n(0),r=n(3),o=n(4),a=i.__importStar(n(2));t.MFAService=a;var s=n(4);Object.defineProperty(t,"MFAComponent",{enumerable:!0,get:function(){return s.MFAComponent}});var c={url:"",method:"POST",mfaAction:function(e){return i.__awaiter(void 0,void 0,void 0,(function(){var t,n,r;return i.__generator(this,(function(i){return t=e.verificationToken,n=e.transactionId,r=e.showBannerForError,[2,d({escalationKey:t,transactionId:n,showBannerForError:r})]}))}))},showBannerForError:!0,showBannerForValidationError:!0};function l(e){return!0===e.success&&!1===e.skip}function u(e){return i.__awaiter(this,void 0,Promise,(function(){var t,n;return i.__generator(this,(function(i){switch(i.label){case 0:return e instanceof Response?[4,e.json()]:[3,2];case 1:return n=i.sent(),[3,3];case 2:n=e,i.label=3;case 3:return t=n,[2,f(Alkami.Localization.SiteText[t.errorSiteTextKey]||t.errorMessage||Alkami.Localization.SiteText.ShortGeneralErrorMessage)]}}))}))}function d(e){return void 0===e&&(e={}),i.__awaiter(this,void 0,Promise,(function(){function t(){u.freeze=!1,u.open=!1}var n,r,a,s,c,l,u,d,f;return i.__generator(this,(function(i){switch(i.label){case 0:return n=e.escalationKey,r=e.transactionId,a=[{text:Alkami.Localization.SiteText["SecondFactorAuthentication.CancelButtonText"],type:"secondary",handlerName:"cancel",closePrompt:!1},{cls:"mfa-action-button",text:Alkami.Localization.SiteText["SecondFactorAuthentication.Challenge.VerifyButtonText"],handlerName:"verify",closePrompt:!1}],s={cancel:function(){f.cancel(),t()}},c=Alkami.Dom.parseHTML('<div class="mfa-modal-content iris-content">\n    \x3c!--<p class="introduction text--center font-weight--bold">'+Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyYourIdentity"]+"</p>--\x3e\n</div>"),"mfa_modal",l=Alkami.Localization.SiteText["SecondFactorAuthentication.Header"],(u=Alkami.Helpers.createDialog(Object.assign({id:"mfa_modal",title:l,buttons:a,content:c,destroyOnClose:!0,handlers:s},e))).freeze=!0,u.element.classList.add("mfa-modal"),d=u.element.querySelector(".mfa-action-button"),[4,o.MFAComponent.init({submitButtonElement:d,escalationKey:n,transactionId:r,postVerificationAction:e.postVerificationAction,showBannerForError:e.showBannerForError})];case 1:return f=i.sent(),c.appendChild(f.element),f.element.addEventListener("mfasuccess",(function(){return t()})),u.open=!0,[2,f.promise]}}))}))}function f(e){var t=window;e=e||t.Alkami.Localization.SiteText["Generic Error Msg"],t.Alkami.FlashBanner?t.Alkami.FlashBanner.showError(e):t.mobileUtil?t.mobileUtil.showFlashMessage("Error",e):t.showFlashError(e)}function p(){if(!(document.cookie.indexOf("c_m_i")>=0)){var e={b_t_z:(new Date).getTimezoneOffset(),s_w:screen.height,s_h:screen.width};document.cookie="c_m_i="+JSON.stringify(e)}}t.post=function e(t){return i.__awaiter(this,void 0,Promise,(function(){var n,o,a,s,d,f,h,m;return i.__generator(this,(function(i){switch(i.label){case 0:return t=Object.assign({},c,t),p(),n=t.mfaAction,o=t,"string"==typeof t.data||t.data instanceof URLSearchParams||t.data instanceof FormData||t.data&&!t.data.hasOwnProperty("__RequestVerificationToken")&&(a=document.querySelector('input[name="__RequestVerificationToken"]'),s=void 0,a&&(s=a.value),d=Object.assign({__RequestVerificationToken:s},t.data),o=Object.assign({},t,{data:d})),[4,r.ajax(o)];case 1:return[4,(f=i.sent()).clone().json()];case 2:return h=i.sent(),m=void 0!==h.errorMessage||void 0!==h.errorSiteTextKey,h.Location?(window.location.href=h.Location,[3,6]):[3,3];case 3:if(!1!==h.success||!m)return[3,4];throw t.showBannerForError&&u(h),f.clone();case 4:return l(h)?[4,n(h)]:[3,6];case 5:return i.sent(),[2,e(t)];case 6:return[2,f.clone()]}}))}))},t.requireStepUp=l,t.showResponseError=u,t.initMFAModal=d,t.showErrorMessage=f,t.showMessage=function(e){var t=window;t.Alkami.FlashBanner?t.Alkami.FlashBanner.showSuccess(e):t.mobileUtil?t.mobileUtil.showFlashMessage("Success",e):t.showFlashSuccess(e)},t.createCMICookie=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAnswers=t.requestVerficationCode=t.fetchMFAModel=void 0;var i=n(0),r=n(3);t.fetchMFAModel=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t;return i.__generator(this,(function(n){switch(n.label){case 0:return[4,r.ajax({url:"/Modules/RiskEvaluation/MFA/Initialize",method:"POST",contentType:"application/json",responseType:"json"})];case 1:return[4,n.sent().json()];case 2:return(e=n.sent()).model&&(t=JSON.parse(e.model),e=Object.assign(e,t)),[2,e]}}))}))},t.requestVerficationCode=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return[2,r.ajax({url:"/Modules/RiskEvaluation/MFA/RequestCode",method:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",responseType:"json",data:e})]}))}))},t.validateAnswers=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return[2,r.ajax({url:"/Modules/RiskEvaluation/MFA/Validate",method:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",responseType:"json",data:e})]}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0;var i=n(0),r={url:"",method:"GET"};t.ajax=function(e){return i.__awaiter(this,void 0,Promise,(function(){var t,n,o,a,s,c,l,u,d;return i.__generator(this,(function(i){switch(i.label){case 0:return e=Object.assign({},r,e),t=null,n=e.url,e.data&&("GET"===e.method?(o=n.split("?"),a=new URLSearchParams(o[1]||""),Object.keys(e.data).forEach((function(t){a.append(t,e.data[t])})),n=o[0]+"?"+a.toString()):e.contentType?0===e.contentType.indexOf("multipart/form-data")?(t=new FormData,Object.keys(e.data).forEach((function(n){t.append(n,e.data[n])}))):0===e.contentType.indexOf("application/x-www-form-urlencoded")?(s=new URLSearchParams,c=e.data,Object.keys(c).forEach((function(e){[].concat(c[e]).forEach((function(t){s.append(e,t)}))})),t=s.toString()):t=0===e.contentType.indexOf("application/json")?JSON.stringify(e.data):e.data.toString():"string"==typeof e.data?t=e.data:e.data instanceof URLSearchParams?(e.contentType="application/x-www-form-urlencoded; charset=UTF-8",t=e.data):e.data instanceof FormData?(e.contentType="multipart/form-data; charset=UTF-8",t=e.data):(e.contentType="application/json; charset=UTF-8",t=JSON.stringify(e.data))),l=Object.assign({},e.headers),e.contentType&&0!==e.contentType.indexOf("multipart/form-data")&&(l["Content-Type"]=e.contentType),e.responseType&&(u={xml:"text/xml",html:"text/html",json:"application/json",text:"text/plain"},l.Accept=u[e.responseType]),[4,fetch(e.url,{body:t,method:e.method,credentials:"same-origin",headers:l})];case 1:if(!(d=i.sent()).ok)throw d;return[2,d]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MFAComponent=void 0;var i=n(0),r=n(7),o=n(2),a=n(1),s=function(){function e(e){var t,n=this;this._types=[],this._buttonSubmitHandler=function(e){n.selectedType&&(n.submitButtonElement.disabled=!0,n.selectedType.buttonSubmitHandler(e))},this.escalationKey=e.escalationKey||null,this.postVerificationAction=e.postVerificationAction||null,this.passwordExpirationInMinutes=e.PasswordExpirationInMinutes,this.transactionId=e.transactionId||e.TransactionId,this.transactionType=e.TransactionType,this.element=Alkami.Dom.parseHTML(c(this)),this.submitButtonElement=e.submitButtonElement,this.showBannerForError=e.showBannerForError,this.showBannerForValidationError=null===(t=e.showBannerForValidationError)||void 0===t||t,this.submitButtonElement.addEventListener("click",this._buttonSubmitHandler),this._defaultStepUpType=e.DefaultStepUpType,this.types=e.Types.map((function(e){return new r.MFATypeComponent(e,n)})),this.selectedType=this.types[0],this.promise=new Promise((function(e,t){n.element.addEventListener("mfasuccess",(function(){e(),n.destroy()})),n.element.addEventListener("mfacancel",(function(){t(new Error("MFA was cancelled."))}))}))}return e.init=function(t){return i.__awaiter(this,void 0,Promise,(function(){var n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,e.insertStyles()];case 1:return i.sent(),[4,o.fetchMFAModel()];case 2:if(!1===(n=i.sent()).success)throw a.showResponseError(n),n;return[2,new e(Object.assign({},n,t))];case 3:throw(r=i.sent())instanceof Response&&a.showResponseError(r),r;case 4:return[2]}}))}))},e.insertStyles=function(){var e=document.getElementById("mfa_styles");return e?Promise.resolve(e):new Promise((function(t,n){(e=Alkami.Dom.parseHTML('<link id="mfa_styles" rel="stylesheet" type="text/css" href="/Modules/Alkami.Modules.RiskEvaluation/Styles/RiskEvaluation.min.css">')).addEventListener("load",(function(){t(e)})),e.addEventListener("error",(function(e){n(e)})),document.head.appendChild(e)}))},Object.defineProperty(e.prototype,"types",{get:function(){return this._types},set:function(e){var t=this;this._types=e.sort((function(e,n){return e.authenticationFactor===t._defaultStepUpType?-1:n.authenticationFactor===t._defaultStepUpType?1:0}));var n=this.element.querySelector(".mfa-tabs"),i=this.element.querySelector(".mfa-tab-panels"),r=this.element.querySelector(".mfa-tab-list");Alkami.Dom.removeChildNodes(r),Alkami.Dom.removeChildNodes(i),e.forEach((function(e){r.appendChild(e.tabElement),i.appendChild(e.element)})),n.style.display=e.length>1?"":"none",this.tabComponent=Alkami.Iris.TabListComponent.init(n)[0],this.tabComponent.activeTab=this.tabComponent.tabs[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedType",{get:function(){return this.types.find((function(e){return e.selected}))||null},set:function(e){var t=this;this.types.forEach((function(n,i){n.selected=n===e;var r=t.tabComponent.tabs[i];n.selected&&!r.active&&(t.tabComponent.activeTab=t.tabComponent.tabs[i])}))},enumerable:!1,configurable:!0}),e.prototype.setSubmitButtonText=function(e,t){this.submitButtonElement.innerHTML="\n    "+(t?'<span class="iris-loading" style="margin-left:10px; margin-right:10px; margin-top: 0px; margin-bottom: 0px;" data-size="small" role="progressbar" aria-valuemin="" aria-valuemax="" aria-valuetext="" aria-hidden="true">\n    <svg class="iris-loading-svg"  viewBox="25 25 50 50">\n        <circle class="iris-loading-path" cx="50" cy="50" r="20" />\n    </svg>\n</span>':"")+'\n    <span class="iris-button__text">'+e+"</span>"},e.prototype.cancel=function(){Alkami.Dom.dispatchEvent(this.element,"mfacancel",{component:this})},e.prototype.destroy=function(){this.element.remove(),this.submitButtonElement.removeEventListener("click",this._buttonSubmitHandler)},e}();t.MFAComponent=s;var c=function(e){return'<div class="mfa-component iris-content">\n    <p id="type__sendtext" class="mfa-sendtext-message">'+Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyYourIdentity"]+'</p>\n    <nav id="mfa_tabs" class="mfa-tabs iris-tabs iris-tabs--sub mar-bottom--xl" aria-label="Authentication Methods" style="display:none">\n        <div class="iris-tabs__inner">\n            <ul class="mfa-tab-list iris-tabs__list">\n            </ul>\n        </div>\n    </nav>\n    <div class="mfa-tab-panels"></div>\n</div>'}},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0).__importStar(n(1)),r=window.Alkami||{};r.Security=Object.assign({},r.Security,i);var o=window;o.Alkami=r;var a=n(9);o.securePost=a.securePost,o.ajaxSecurePost=a.ajaxSecurePost,$((function(){a.initLegacyMFA()}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MFATypeComponent=void 0;var i=n(0),r=n(8),o=n(2),a=n(1),s=function(){function e(e,t){var n=this;this._isCodeRequested=!1,this._selected=!1,this._fontIconClassMap={email:"font-icon-email-alt",sms:"font-icon-mobile-sms",voice:"font-icon-receive-call",questions:"font-icon-question",token:"font-icon-lock-token",totp:"font-icon-phone2"},this.otpReceipt="",this._buttonLabels={challenge:Alkami.Localization.SiteText["SecondFactorAuthentication.Challenge.VerifyButtonText"],request_code:Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyCode.SendCodeButtonText"],verify_code:Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyCode.VerifyButtonText"]},this._buttonLoadingLabels={challenge:Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyCode.VerifyButtonText.VerifyingState"],request_code:Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyCode.SendCodeButtonText.SendingState"],verify_code:Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyCode.VerifyButtonText.VerifyingState"]},this._activateHandler=function(){n.parentComponent.selectedType=n},this.buttonSubmitHandler=function(e){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:switch(this.parentComponent.setSubmitButtonText(this._buttonLoadingLabels[this.screenName],!0),this.screenName){case"challenge":case"verify_code":return[3,1];case"request_code":return[3,3]}return[3,5];case 1:return[4,this._verifyChallengeSubmitHandler()];case 2:return e.sent(),[3,5];case 3:return[4,this._requestCodeSubmitHandler()];case 4:return e.sent(),[3,5];case 5:return this.refreshButtonLabel(),[2]}}))}))},this.resendCodeSubmitHandler=function(){return i.__awaiter(n,void 0,void 0,(function(){var e;return i.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.requestCode()];case 1:return t.sent(),this.isCodeRequested=!0,[3,3];case 2:return e=t.sent(),this._displayError(e),[3,3];case 3:return[2]}}))}))},this.resetSubmitHandler=function(){n.choiceInputs.forEach((function(e){return e.checked=!1})),n.answerInputs.forEach((function(e){return e.value=""})),n.isCodeRequested=!1},this._requestCodeSubmitHandler=function(){return i.__awaiter(n,void 0,void 0,(function(){var e;return i.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.requestCode()];case 1:return t.sent(),this.isCodeRequested=!0,[3,3];case 2:return e=t.sent(),this._displayError(e),[3,3];case 3:return[2]}}))}))},this._verifyChallengeSubmitHandler=function(){return i.__awaiter(n,void 0,void 0,(function(){var e,t,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:e=this.choiceInputs,t=1===e.length?e[0]:e.find((function(e){return e.checked})),n=t?t.value:"",i.label=1;case 1:return i.trys.push([1,5,,8]),[4,this.verifyCode()];case 2:return i.sent(),this.parentComponent.postVerificationAction?(o={success:!0,mfaType:this.name,isLocked:!1,mfaContact:n},[4,this.parentComponent.postVerificationAction(o)]):[3,4];case 3:i.sent(),i.label=4;case 4:return Alkami.Dom.dispatchEvent(this.parentComponent.element,"mfasuccess",this.parentComponent),[3,8];case 5:return r=i.sent(),this.parentComponent.postVerificationAction?(o={success:!1,mfaType:this.name,isLocked:!!r.lockedOutUrl,mfaContact:n},[4,this.parentComponent.postVerificationAction(o)]):[3,7];case 6:i.sent(),i.label=7;case 7:return r.lockedOutUrl?window.location.href=r.lockedOutUrl:(this._displayError(r,r.errorMessage),this.answerInputs.forEach((function(e){e.value=""})),r.choices&&r.choices.length>0&&(this.choices=r.choices)),[3,8];case 8:return[2]}}))}))},this.returnKeyPress=function(e){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(t){return 13!=e.keyCode?[2,!0]:(this.buttonSubmitHandler(e),[2])}))}))},this._choiceChangeHandler=function(e){n.parentComponent.submitButtonElement.disabled=!n.validateRequestCodeScreen()},this._challengeChangeHandler=function(e){var t=e.currentTarget,i=n.parentComponent.submitButtonElement,r=n.validateChallengeScreen();i.disabled=!r,n.answerInputs&&n.answerInputs.length>1&&(1==r?t.addEventListener("keypress",n.returnKeyPress):t.removeEventListener("keypress",n.returnKeyPress))},this.name=e.Name,this._choices=e.Choices,this.authenticationFactor=e.AuthenticationFactor,this.requiresChoice=e.RequiresChoice,this.parentComponent=t,this.element=Alkami.Dom.parseHTML(r.template(this)),this.tabElement=Alkami.Dom.parseHTML(r.tabTemplate(this)),this.authenticatorProviderId=e.AuthenticatorProviderId,this.wireEventListeners(),this.selected=!1}return Object.defineProperty(e.prototype,"choices",{get:function(){return this._choices},set:function(e){this._choices=e,this.element.innerHTML=this.requiresChoice?r.choicesTemplate(this):r.challengeTemplate(this),this.wireEventListeners(),this.refreshUI()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sendText",{get:function(){return"sms"===this.name&&1===this.choices.length?Alkami.Localization.SiteText.get("RiskEvaluation.SendText.MultipleSMSNumbers",this.choices[0]):"email"===this.name&&1===this.choices.length?Alkami.Localization.SiteText.get("RiskEvaluation.SendText.OneEmail",this.choices[0]):"voice"===this.name&&1===this.choices.length?Alkami.Localization.SiteText.get("RiskEvaluation.SendText.OnePhoneNumber",this.choices[0]):"questions"===this.name&&1===this.choices.length?Alkami.Localization.SiteText.get("RiskEvaluation.Description.OneQuestion",this.choices[0]):"sms"===this.name?Alkami.Localization.SiteText["RiskEvaluation.SendText.MultipleSMSNumbers"]:"email"===this.name?Alkami.Localization.SiteText["RiskEvaluation.SendText.MultipleEmails"]:"voice"===this.name?Alkami.Localization.SiteText["RiskEvaluation.SendText.MultiplePhoneNumbers"]:"questions"===this.name?Alkami.Localization.SiteText["RiskEvaluation.Descritpion.MultipleQuestions"]:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){switch(this.name){case"email":return Alkami.Localization.SiteText["SecondFactorAuthentication.AuthenticationType.Email"];case"sms":return Alkami.Localization.SiteText["SecondFactorAuthentication.AuthenticationType.SMS"];case"voice":return Alkami.Localization.SiteText["SecondFactorAuthentication.AuthenticationType.Voice"];case"questions":return Alkami.Localization.SiteText["SecondFactorAuthentication.AuthenticationType.Questions"];case"token":return Alkami.Localization.SiteText["SecondFactorAuthentication.AuthenticationType.Token"];case"totp":return Alkami.Localization.SiteText["SecondFactorAuthentication.AuthenticationType.TOTP"];default:return Alkami.Utils.StringHelper.capitalize(this.name)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,e&&this.refreshUI(),this.element.style.display=e?"":"none"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontIconClass",{get:function(){var e=this._fontIconClassMap[this.name]||"";return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"challengePlaceholder",{get:function(){return"questions"===this.name?Alkami.Localization.SiteText["SecondFactorAuthentication.Challenge.AnswerPlaceholder"]:Alkami.Localization.SiteText["SecondFactorAuthentication.Challenge.EnterCodePlaceholder"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"codeExpiryMessage",{get:function(){return Alkami.Localization.SiteText.get("SecondFactorAuthentication.VerifyCode.CodeExpiryMessage",this.parentComponent.passwordExpirationInMinutes)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resetText",{get:function(){return"email"===this.name?Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyCode.TryAnotherEmail"]:Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyCode.TryAnotherNumber"]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCodeRequested",{get:function(){return this._isCodeRequested},set:function(e){this._isCodeRequested=e,this.refreshUI()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenName",{get:function(){return this.requiresChoice?this.isCodeRequested?"verify_code":"request_code":"challenge"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"answerInputs",{get:function(){return Array.from(this.element.querySelectorAll("[name=Answers]"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"choiceInputs",{get:function(){return Array.from(this.element.querySelectorAll("[name=Choice]"))},enumerable:!1,configurable:!0}),e.prototype.refreshUI=function(){var e=Array.from(this.element.querySelectorAll(".mfa-screen")),t=this.element.querySelector("#type_"+this.name+"_"+this.screenName),n=this.parentComponent.element.querySelector("#type__sendtext"),i=this.parentComponent.element.querySelector(".iris-tabs__list");i&&1==i.childElementCount&&(n.style.display="none"),e.forEach((function(e){e.style.display="none"})),t.style.display="",this.refreshButtonLabel();var r=this.parentComponent.submitButtonElement;"request_code"===this.screenName?r.disabled=!this.validateRequestCodeScreen():"challenge"===this.screenName?r.disabled=!this.validateChallengeScreen():r.disabled=!1,this._hideErrorElement()},e.prototype.requestCode=function(){return i.__awaiter(this,void 0,Promise,(function(){var e,t,n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return e=this.choiceInputs,t=1===e.length?e[0]:e.find((function(e){return e.checked})),n=t?t.value:"",[4,o.requestVerficationCode({Answers:[],Choices:this.choices,AuthenticationFactor:this.authenticationFactor,Choice:n,RequiresChoice:this.requiresChoice,AuthenticatorProviderId:this.authenticatorProviderId})];case 1:return[4,i.sent().json()];case 2:if(!(r=i.sent()).success)throw r;return this.otpReceipt=r.otpReceipt,[2,r]}}))}))},e.prototype.verifyCode=function(){return i.__awaiter(this,void 0,Promise,(function(){var e,t,n,r,a;return i.__generator(this,(function(i){switch(i.label){case 0:return e=this.choiceInputs,t=1===e.length?e[0]:e.find((function(e){return e.checked})),n=t?t.value:"",r=this.answerInputs.map((function(e){return e.value})),[4,o.validateAnswers({Answers:r,Choices:this.choices,AuthenticationFactor:this.authenticationFactor,Choice:n,TransactionType:this.parentComponent.transactionType,TransactionId:this.parentComponent.transactionId,EscalationKey:this.parentComponent.escalationKey,AuthenticatorProviderId:this.authenticatorProviderId,OTPReceipt:this.otpReceipt})];case 1:return[4,i.sent().json()];case 2:if(!(a=i.sent()).success)throw a;return[2,a]}}))}))},e.prototype.validateRequestCodeScreen=function(){var e=this.choiceInputs.find((function(e){return e.checked}));return this.choices.length<=1||!!e},e.prototype.validateChallengeScreen=function(){return 0===this.answerInputs.filter((function(e){return!e.value})).length},e.prototype.wireEventListeners=function(){var e=this;this.tabElement.addEventListener("activate",this._activateHandler);var t=this.element.querySelector("#"+this.name+"_reset");t&&t.addEventListener("click",this.resetSubmitHandler);var n=this.element.querySelector("#"+this.name+"_resend_code");n&&n.addEventListener("click",this.resendCodeSubmitHandler),this.choiceInputs.forEach((function(t){t.addEventListener("change",e._choiceChangeHandler)})),this.answerInputs.forEach((function(t){t.addEventListener("input",e._challengeChangeHandler),t.addEventListener("focus",e._hideErrorElement)})),Array.from(this.element.querySelectorAll("#type_"+this.name+"_challenge_form, #type_"+this.name+"_verify_code_form")).forEach((function(t){t.addEventListener("submit",(function(t){t.preventDefault(),e.buttonSubmitHandler(t)}))}));var i=this.tabElement.querySelector(".iris-tabs__link");i&&i.addEventListener("click",(function(e){e.preventDefault()}))},e.prototype.refreshButtonLabel=function(){this.parentComponent.setSubmitButtonText(this._buttonLabels[this.screenName],!1)},e.prototype._displayError=function(e,t){if(this.parentComponent.showBannerForValidationError)a.showResponseError(e);else if(t)this._showErrorElement(t);else{var n=e instanceof Response?e.json():e,i=Alkami.Localization.SiteText[n.errorSiteTextKey]||n.errorMessage||Alkami.Localization.SiteText.ShortGeneralErrorMessage;this._showErrorElement(i)}},e.prototype._hideErrorElement=function(){Array.from(document.querySelectorAll('[id$="_error_message_div"]')).forEach((function(e){e.style.display="none"}))},e.prototype._showErrorElement=function(e){var t=this.element.querySelector("#"+this.name+"_error_message_div"),n=this.element.querySelector("#"+this.name+"_error_message_text");e&&""!=e&&(t&&(t.style.display=""),n&&(n.innerHTML=e))},e}();t.MFATypeComponent=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.challengeInputTemplate=t.choiceInputTemplate=t.verifyCodeTemplate=t.requestCodeTemplate=t.choicesTemplate=t.challengeTemplate=t.template=t.tabTemplate=void 0,t.tabTemplate=function(e){return'<li id="type_'+e.name+'_tab" class="iris-tabs__list-item">\n            <a class="iris-tabs__link" href="#">\n                <span class="iris-tabs__link-icon '+e.fontIconClass+'"></span>\n                <span class="iris-tabs__link-text">'+e.label+"</span>\n            </a>\n         </li>"},t.template=function(e){return'<div id="type_'+e.name+'_tab_panel" class="tab_panel">\n\t        '+(e.requiresChoice?t.choicesTemplate(e):t.challengeTemplate(e))+"\n         </div>"},t.challengeTemplate=function(e){return'<div id="type_'+e.name+'_challenge" class="mfa-screen">\n    <p id="type_'+e.name+'_sendtext" class="mfa-sendtext-message">'+e.sendText+'</p>\n    <form id="type_'+e.name+'_challenge_form">\n        <div id="type_'+e.name+'_challenges">\n            '+e.choices.map((function(n,i){return t.challengeInputTemplate(n,i,e)})).join("")+"\n        </div>\n    </form>\n</div>"},t.choicesTemplate=function(e){return t.requestCodeTemplate(e)+t.verifyCodeTemplate(e)},t.requestCodeTemplate=function(e){var n='<div id="type_'+e.name+'_request_code" class="mfa-screen">\n    <p id="type_'+e.name+'_sendtext" class="mfa-sendtext-message">'+e.sendText+'</p>\n    <form id="type_'+e.name+'_request_code_form">';return e.choices.length>1?n+='<div id="type_'+e.name+'_choices">\n    <fieldset class="iris-form-groupset iris-form-groupset--stacked pad-bottom--lg">\n        <div class="iris-form-groupset__container">\n            <legend class="iris-form-groupset__label sr-only" aria-labelledby="type_'+e.name+'_sendtext"></legend>\n            <div class="iris-form-groupset__groups">\n                '+e.choices.map((function(n,i){return t.choiceInputTemplate(n,i,e)})).join("")+"\n            </div>\n        </div>        \n    </fieldset>\n</div>":n+='<input type="hidden" name="Choice" value="'+e.choices[0]+'" />',n+="</form></div>"},t.verifyCodeTemplate=function(e){return'<div id="type_'+e.name+'_verify_code" class="mfa-screen">\n    <p id="type_'+e.name+'_sendtext" class="mfa-sendtext-message">\n        <span id="type_'+e.name+'_choice_message"></span>\n        <small>'+e.codeExpiryMessage+'</small>\n    </p>\n    <form id="type_'+e.name+'_verify_code_form">\n        <div class="iris-form-group iris-form-group--stacked">\n            <label class="iris-form-group__label" for="'+e.name+'_verify_code_input">'+Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyCode.EnterCodePlaceholder"]+'</label>\n            <div class="iris-form-group__field">\n                <div class="iris-textfield">\n                    <input id="'+e.name+'_verify_code_input" name="Answers" type="text" class="iris-textfield__input" autocomplete="off" aria-required="true" required />\n                </div>\n            </div>\n            <div id="'+e.name+'_error_message_div" class="iris-notification iris-notification--breadbox iris-notification--negative" style="margin-bottom:16px" role="alert">\n                <div class="iris-notification__context">\n                    <span class="font-icon-error" role="img" aria-label="Error!"></span>\n                </div>\n                <div id="'+e.name+'_error_message_text" class="iris-notification__message"></div>\n            </div>\n        </div>\n        <div class="button-group">\n            <button id="'+e.name+'_resend_code" class="iris-button iris-button--ghost pad--0" type="button">\n                <span class="iris-button__text">Resend code</span>\n            </button>\n                '+(e.choices.length<=1?"":'<span class="font-size--xs"> '+Alkami.Localization.SiteText["SecondFactorAuthentication.VerifyCode.ResendCode.Or"]+' </span>\n                <button id="'+e.name+'_reset" class="iris-button iris-button--ghost pad--0" type="button">\n                    <span class="iris-button__text">'+e.resetText+"</span>\n                </button>")+"\n        </div>\n    </form>\n</div>"},t.choiceInputTemplate=function(e,t,n){return'<div class="iris-radio">\n    <input class="iris-radio__input" type="radio" id="'+n.name+"_option_"+t+'" name="Choice" value="'+e+'" />\n    <label class="iris-radio__label" for="'+n.name+"_option_"+t+'">\n        <span class="iris-radio__content">'+e+"</span>\n    </label>\n</div>"},t.challengeInputTemplate=function(e,t,n){return'<div class="iris-form-group iris-form-group--stacked">\n    <label class="iris-form-group__label" for="challenge_'+n.name+"_"+t+'">'+e+'</label>\n    <div class="iris-form-group__field">\n        <div class="iris-textfield">\n            <input id="challenge_'+n.name+"_"+t+'" name="Answers" type="text" class="iris-textfield__input" aria-required="true" required />\n        </div>\n    </div>\n</div>'}},function(e,t,n){"use strict";function i(){-1!==document.URL.toLowerCase().indexOf("mobile")?0==$("#second_factor_container").length&&$("body").append("<div id='second_factor_container' class='card-container card-container-modal' style='display: none;'></div>"):0==$("#second_factor").length&&$("body").append("<div id='second_factor' class='modal fade' role='dialog' style='display: none;'></div>")}function r(e,t,n){var i=$.Event("show.bs.modal",{relatedTarget:$("#second_factor_container, #second_factor")[0]});return $("#second_factor_container, #second_factor").trigger(i),function(){var e=document.querySelector(".modal-backdrop"),t=document.querySelector(".modal.fade.in");null!==e&&(e.setAttribute("old-display-value",window.getComputedStyle(e).display||""),e.style.display="none");null!==t&&(t.setAttribute,t.setAttribute("old-display-value",window.getComputedStyle(t).display||""),t.style.display="none")}(),Alkami.Security.initMFAModal({escalationKey:e.verificationToken,transactionId:e.transactionId}).then((function(e){s();var n=$.Event("hide.bs.modal");$("#second_factor_container, #second_factor").trigger(n),t&&t()})).catch((function(e){if(e.instanceof!==Response)return s(),Promise.reject(e);var t=e.statusText,i=e.clone();e.json().then((function(e){n(e,t,i)}))}))}function o(e,t,n,i,o){Alkami.Security.createCMICookie(),$.ajax({method:"POST",url:t[0].action,data:t.serialize(),cache:!1,success:function(n,i,a){if(n.Location)window.location.href=n.Location;else if(!0===n.success&&!1===n.skip){r(n,(function(){e(t)}),o).catch((function(){o()}))}else if(!1!==n.success||void 0===n.errorMessage&&void 0===n.errorSiteTextKey)e&&e(n,i,a);else{var s=void 0!==n.errorSiteTextKey?Alkami.Localization.SiteText[n.errorSiteTextKey]:n.errorMessage;Alkami.Security.showErrorMessage(s),o&&o(n,i,a)}}})}function a(e,t,n,o,s,c,l,u,d,f){$('input[name="__RequestVerificationToken"]')&&"object"==typeof t&&(t.__RequestVerificationToken=$('input[name="__RequestVerificationToken"]').val()),null==f&&(f=!0),i(),$.ajax({method:"POST",url:e,data:t,cache:!1,contentType:d,processData:f,success:function(i,p,h){if("string"==typeof i&&(i=JSON.parse(i||"{}")),i.Location)window.location.href=i.Location;else if(i.success&&!1===i.skip)r(i,(function(){a(e,t,n,o,s,c,l,u,d,f)}),o).catch((function(){s()}));else if(!1!==i.success||void 0===i.errorMessage&&void 0===i.errorSiteTextKey)n(i,p,h);else if(o)o(i,p,h);else{var m=void 0!==i.errorSiteTextKey?Alkami.Localization.SiteText[i.errorSiteTextKey]:i.errorMessage;Alkami.Security.showErrorMessage(m)}},error:o})}function s(){var e=document.querySelector(".modal-backdrop"),t=document.querySelector(".modal.fade.in");null!==e&&"none"===e.style.display&&(e.style.display=e.getAttribute("old-display-value"),e.removeAttribute("old-display-value")),null!==t&&"none"===t.style.display&&(t.style.display=t.getAttribute("old-display-value"),t.removeAttribute("old-display-value"))}n.r(t),n.d(t,"initLegacyMFA",(function(){return i})),n.d(t,"securePost",(function(){return o})),n.d(t,"ajaxSecurePost",(function(){return a}))}]);
//# sourceMappingURL=RiskEvaluation.2.10.0.min.js.map